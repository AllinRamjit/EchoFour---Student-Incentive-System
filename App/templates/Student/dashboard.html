{% extends "base.html" %}

{% block title %}Student Dashboard - Student Incentive System{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1 class="page-title">STUDENT DASHBOARD</h1>
    </div>

    <h2 class="welcome-text">Welcome, {{ current_user.username }}</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}" style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 8px; {% if category == 'error' %}background: #FED7D7; color: #C53030;{% else %}background: #C6F6D5; color: #276749;{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="card" style="margin-bottom: 1.5rem;">
        <div class="card-header">Navigation</div>
        <nav class="nav-menu" style="display: flex; flex-direction: column; gap: 0.5rem; padding: 1rem;">
            <a href="/student/hours" class="nav-menu-item">
                View all logged hours & request confirmations
            </a>
            <a href="/student/accolades" class="nav-menu-item">
                My Accolades
            </a>
            <a href="/student/history" class="nav-menu-item">
                View Activity History
            </a>
            <a href="/student/leaderboard" class="nav-menu-item">
                View Leaderboard
            </a>
        </nav>
    </div>

    <div class="card" style="margin-bottom: 1.5rem;">
        <div class="card-header">Hours Summary</div>
        <div style="padding: 1rem;">
            <p style="margin-bottom: 0.5rem;"><strong>Hours Confirmed:</strong> {{ confirmed_hours }} Hours</p>
            <p style="margin-bottom: 0.5rem;"><strong>Pending Approval:</strong> {{ pending_hours }} Hours</p>
            <p style="margin-bottom: 0;"><strong>Next Milestone:</strong> {{ next_milestone }} (Current {{ confirmed_hours }})</p>
        </div>
    </div>

    <div class="card">
        <div class="card-header">Recent Activities</div>
        {% if recent_activities %}
            {% for activity in recent_activities %}
            <div class="request-item" style="padding: 1rem; border-bottom: 1px solid #E2E8F0; display: flex; justify-content: space-between; align-items: center;">
                <span>{{ activity.activity if activity.activity else 'Activity' }} - {{ activity.hours }} Hours - {% if activity.status == 'approved' %}Confirmed{% elif activity.status == 'pending' %}Pending{% else %}{{ activity.status | capitalize }}{% endif %}</span>
            </div>
            {% endfor %}
        {% else %}
            <p style="color: #718096; text-align: center; padding: 2rem;">No recent activities</p>
        {% endif %}
    </div>
</div>
{% endblock %}